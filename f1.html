<!DOCTYPE html>
<html>

<head>
    <title>WEBVR - Virtual Tour FILKOM UB</title>

    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://realitas.id/VRTour/aframe-href-component.js"></script>

    <script>
        AFRAME.registerComponent('info-panel-system', {
            init: function () {
                // --- PANEL FUNCTIONS ---
                function openPanel(el) {
                    el.setAttribute('visible', 'true');
                    el.setAttribute('scale', '1 1 1');
                }
                function closePanel(el) {
                    el.setAttribute('visible', 'false');
                    el.setAttribute('scale', '0 0 0');
                }

                var infoBtn = this.el.querySelector('#info_btn');
                var infoPanel = this.el.querySelector('#info_panel');
                var closeBtn = this.el.querySelector('#close_btn');

                // --- Init Close---
                closePanel(infoPanel);

                infoBtn.addEventListener('click', function () {
                    openPanel(infoPanel);
                });
                closeBtn.addEventListener('click', function () {
                    closePanel(infoPanel);
                });
            }
        });
    </script>
</head>

<body>

    <a-scene info-panel-system>

        <a-assets>
            <img id="bg" src="skybox/F1.JPG">
            <img id="arrow" src="assets/arrow.png">
        </a-assets>

        <a-entity position="0 0 0" rotation="0 90 0">
            <a-camera id="camera"
                      look-controls
                      wasd-controls-enabled="false">

                <a-entity id="cursor"
                    cursor="fuse: true; fuseTimeout: 1500"
                    position="0 0 -1"
                    geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.02"
                    material="color: white; shader: flat"

                    animation__fusing="property: geometry.radiusOuter; from: 0.050; to: 0.010; startEvents: fusing; easing: easeInQuad; dur: 1000"
                    animation__fusing2="property: geometry.radiusInner; from: 0.050; to: 0.005; startEvents: fusing; easing: easeInQuad; dur: 1000">
                </a-entity>

            </a-camera>
        </a-entity>

        <a-sky src="#bg"></a-sky>

        <a-entity id="item001"
                  position="-6.5 0 3"
                  rotation="-90 90 45">
            <a-image src="#arrow" transparent="true" href="f2.html"></a-image>
            <a-text font="kelsonsans" width="6" align="center" value="F Lantai 2" position="0.3 1.3 0.4" rotation="60 0 0"></a-text>
        </a-entity>

        <a-entity id="item002"
                  position="0.5 0 5"
                  rotation="-90 90 100">
            <a-image src="#arrow" transparent="true" href="f.html" rotation="0 0 30"></a-image>
            <a-text font="kelsonsans" width="6" align="center" value="Depan Gedung F" position="0.2 1.3 0.4" rotation="60 0 0"></a-text>
        </a-entity>


        <a-entity position="3 1.5 0" rotation="0 -90 0">
            <a-circle id="info_btn" color="#3366cc" radius="0.3">
                <a-text value="i" align="center" color="white" width="4" position="0 0 0.01"></a-text>
            </a-circle>
            <a-text value="Info Lantai 1" align="center" width="3" position="0 -0.5 0"></a-text>
        </a-entity>

        <a-entity id="info_panel" visible="false" scale="0 0 0" position="2 1.6 0" rotation="0 -90 0">
            
            <a-plane color="black" opacity="0.9" width="2.7" height="1.6"></a-plane>
            
            <a-text value="Lantai ini merupakan pusat pelayanan bagi mahasiswa. Di sini terdapat Lobby Utama dan Bagian Akademik untuk urusan administrasi perkuliahan seperti pengurusan KRS, surat-menyurat, dan legalisir."
                    align="center" width="2.2" position="0 0 0.01">
            </a-text>

            <a-entity id="close_btn" position="1.2 0.65 0.02">
                <a-circle color="#cc3333" radius="0.15"></a-circle>
                <a-text value="X" align="center" width="4" position="0 0 0.01"></a-text>
            </a-entity>

        </a-entity>

    </a-scene>

</body>

</html>